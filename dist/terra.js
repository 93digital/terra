!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";!function(e){var t,r,n=document.querySelectorAll(".terra-search"),a=!0;function o(){var e=" -webkit- -moz- -o- -ms- ".split(" ");return!!("ontouchstart"in window||window.DocumentTouch&&function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}(document,DocumentTouch))||function(e){return window.matchMedia(e).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}function i(){var e=document.querySelectorAll(".terra__dropdown"),t=function(){for(var e=document.createElement("fakeelement"),t={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},r=Object.keys(t),n=0,a=r.length;n<a;n++){var o=r[n];if(void 0!==e.style[o])return t[o]}return null}();e.forEach(function(e){if(e.classList.contains("visible")){if(t){var r=e.querySelector(".terra__dropdown__list");r.style.height="0",r.addEventListener(t,function e(){this.style.display="none",this.removeEventListener(t,e)})}else e.style.display="none";e.classList.remove("visible")}})}function s(n,o){if(!n.classList.contains("terra"))return!0;o&&o.preventDefault();var i=e(n);i.find('input[name="terra-more"]').val(a?0:1);var s=i.serialize(),l=i.find(".terra-container");return(!a||s!=r)&&(r=s,i.addClass("terra--ajax"),function(e){var t,r=e.split("&"),n=[],a={},o=window.location.search.substr(1),i=window.location.hash,s={};o.split("&").forEach(function(e){var t=e.split("=");s[t[0]]=decodeURIComponent(t[1])}),a=s,r.forEach(function(e){if(-1===e.indexOf("posts-")&&-1===e.indexOf("query-")){var t=e.split("=")[0];a[t]&&delete a[t],t.length>0&&n.push(e)}}),t=terra.archiveurl;var l=n.join("&"),c=t+(l.length?"?":"")+l+i;window.MSInputMethodContext&&document.documentMode||window.history.pushState({},"",c)}(s),function(r,n,o){t&&t.abort(),e("body").trigger("terraStart",[r,o]);var i={action:"nine3_terra",nonce:terra.nonce,terraFilter:!0,terraName:r.attr("name"),terraAppend:!a,params:n,uid:r.data("uid")};r.removeClass("terra--done"),console.log(i),t=e.ajax({type:"POST",url:terra.ajaxurl,data:i,success:function(t){a&&o.empty();var n=e(t);if(n.length){n.not(".terra-posts-found").addClass("loaded"),o.append(n);var i=parseInt(o.find("terra-found").html(),10),s=(parseInt(o.find("terra-posts-count").html(),10),parseInt(o.find("terra-offset").html(),10)),l=o.find("terra-tax").html();if(l){var c=l.split(",");l.length&&e(".terra__select.terra-filter option").each(function(e,t){c.includes(t.value)||""===t.value||null==t.value||"ASC"===t.value||"DESC"===t.value?t.removeAttribute("disabled"):t.setAttribute("disabled","disabled")})}r.find('input[name="posts-offset"]').val(s),0===i||s===i?(r.addClass("terra-more--none"),r.find(".terra-submit").hide()):(r.removeClass("terra-more--none"),r.find(".terra-submit").show());var d=r.find(".terra-posts-found__label");d.length&&d.html(o.find("terra-posts-found-label").html()),o.find("terra-tax").remove(),o.find("terra-found").remove(),o.find("terra-offset").remove(),o.find("terra-posts-count").remove(),o.find("terra-posts-found-label").remove(),r.removeClass("terra--ajax"),r.addClass("terra--done")}else r.addClass("terra-more--none");a=!0,e("body").trigger("terraDone",[o,n])}})}(i,s,l),!1)}document.addEventListener("click",function(t){var r=t.target,n=r.parentNode;n.classList.contains("terra__dropdown__selected")&&(n=(r=n).parentNode);var a=n.classList.contains("visible");if(i(),!a)if(r.classList.contains("terra__dropdown__selected")){var o=r.nextSibling;o.style.maxHeight="none",o.style.height="0px",o.style.display="block",o.style.height="".concat(o.children[0].clientHeight,"px"),n.classList.add("visible"),t.stopPropagation()}else if(r.classList.contains("terra__dropdown__list__button")){var l=r.getAttribute("name"),c=e(r).closest("form")[0].querySelector('select[data-filter="'.concat(l,'"]')),d=e(r).closest(".terra__dropdown")[0].querySelector(".terra__dropdown__selected__label");c.value=r.value,d.innerHTML=r.innerHTML}else if(r.classList.contains("terra-filter")&&r.type&&["checkbox","radio"].indexOf(r.type)>=0){s(e(r).closest("form")[0])}}),n.forEach(function(t){var r=e(t).closest("form.terra")[0],n=parseInt(t.getAttribute("data-debounce"),10)||200,a=null;t.addEventListener("input",function(){clearTimeout(a),a=setTimeout(function(){s(r)},n)});for(var o=document.querySelectorAll(".terra .g02__suggested-link"),i=function(e){o[e].addEventListener("click",function(n){var a=o[e].innerHTML;n.preventDefault(),t.value=a,s(r)})},l=0;l<o.length;l++)i(l)}),e("body").on("click",".terra-submit",function(){a=!1,s(e(event.target).closest("form")[0])}).ready(function(){o()&&e("form.terra").addClass("is-touch"),r=e("form.terra").first().serialize()}).on("change",".terra__select",function(){var t=e(this),r=t.closest("form");(r.hasClass("is-touch")||t.hasClass("default-style"))&&s(r.get(0))}),e("body").on("submit",function(e){s(e.target,e)}),e('.terra button[type="reset"]').on("click",function(){e(".terra__select option").each(function(){e(this).prop("disabled")?e(this).attr("selected","selected"):e(this).removeAttr("selected")})});var l=!!window.MSInputMethodContext&&!!document.documentMode;document.addEventListener("reset",function(e){if(l){var t=window.location.href,r=t.substring(0,t.indexOf("?"));window.location.href=r+"?f=#filters"}else!function(e){var t=e.elements;e.reset();for(var r=0;r<t.length;r++){var n=t[r];switch(n.type.toLowerCase()){case"search":n.value="",n.defaultValue="";break;case"text":case"password":case"textarea":case"hidden":n.value="";break;case"radio":case"checkbox":n.checked&&(n.checked=!1);break;case"select":case"select-one":case"select-multi":n.selectedIndex=0}}s(e)}(e.target)})}(jQuery)}]);
//# sourceMappingURL=terra.js.map